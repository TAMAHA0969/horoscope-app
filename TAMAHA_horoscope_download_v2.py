
import streamlit as st
from datetime import datetime
import calendar

# å®¿å‘½æ•°ã®åˆ†é¡ã¨ç‰¹å¾´
shukumei_roles = {
    1: "ãƒªãƒ¼ãƒ€ãƒ¼",
    2: "ã‚µãƒãƒ¼ã‚¿ãƒ¼",
    3: "ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼",
    4: "ã‚µãƒãƒ¼ã‚¿ãƒ¼",
    5: "ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼",
    6: "ãƒªãƒ¼ãƒ€ãƒ¼",
    7: "ã‚µãƒãƒ¼ã‚¿ãƒ¼",
    8: "ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼",
    9: "ãƒªãƒ¼ãƒ€ãƒ¼",
    11: "ã‚µãƒãƒ¼ã‚¿ãƒ¼",
    22: "ã‚µãƒãƒ¼ã‚¿ãƒ¼",
    33: "ãƒªãƒ¼ãƒ€ãƒ¼"
}

shukumei_comments = {
    1: "è‡ªåˆ†ã‚’ä¿¡ã˜ã¦çªãé€²ã‚ï¼å…ˆé§†è€…ã®é“ã¯ã‚ãªãŸãŒåˆ‡ã‚Šæ‹“ãã€‚",
    2: "æ”¯ãˆã‚‹åŠ›ãŒå¼·ã¿ã€‚ç„¡ç†ã«å‰ã«å‡ºãªãã¦ã‚‚ã€é™°ã®åŠ›ãŒå…‰ã‚‹ï¼",
    3: "è‡ªç”±ã¨æ¥½ã—ã•ãŒéµã€‚å‹ã«ã¯ã¾ã‚‰ãšã€è‡ªåˆ†ã®æ„Ÿæ€§ã‚’ä¿¡ã˜ã‚ˆã†ã€‚",
    4: "åœ°é“ãªåŠªåŠ›ãŒå®Ÿã‚’çµã¶ã€‚ç„¦ã‚‰ãšã€ä¸€æ­©ãšã¤ç¢ºå®Ÿã«å‰é€²ã‚’ï¼",
    5: "å¤‰åŒ–ã‚’æã‚Œãšã€æ–°ã—ã„ä¸–ç•Œã¸é£›ã³è¾¼ã‚‚ã†ï¼æŸ”è»Ÿã•ãŒæ­¦å™¨ã€‚",
    6: "äººã‚’æ”¯ãˆã‚‹ã®ã¯ç´ æ™´ã‚‰ã—ã„ã€‚ã§ã‚‚ã€è‡ªåˆ†ã‚’å¤§äº‹ã«ã™ã‚‹ã“ã¨ã‚‚å¿˜ã‚Œãšã«ï¼",
    7: "ä¸€äººã®æ™‚é–“ãŒã‚ãªãŸã‚’æˆé•·ã•ã›ã‚‹ã€‚å†…ãªã‚‹å£°ã«è€³ã‚’å‚¾ã‘ã¦ã€‚",
    8: "æˆåŠŸã‚’ã¤ã‹ã‚€åŠ›ã‚ã‚Šï¼è‡ªä¿¡ã‚’æŒã£ã¦å ‚ã€…ã¨ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã—ã‚ˆã†ã€‚",
    9: "ã™ã¹ã¦ã‚’å—ã‘å…¥ã‚Œã‚‹å¤§ããªæ„›ã‚’æŒã¤äººã€‚æ‰‹æ”¾ã™ã“ã¨ã§æ–°ãŸãªé“ãŒé–‹ãï¼",
    11: "ç‰¹åˆ¥ãªæ„å‘³ã‚’æŒã¤æ•°å­—ã§ã™ã€‚",
    22: "ä¸–ç•Œã‚’å‹•ã‹ã™å¯èƒ½æ€§ã‚’ç§˜ã‚ãŸãƒã‚¹ã‚¿ãƒ¼ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ã€‚ãƒ“ã‚¸ãƒ§ãƒ³ã‚’ä¿¡ã˜ã¦è¡Œå‹•ã‚’ã€‚",
    33: "ç„¡æ¡ä»¶ã®æ„›ã‚’åºƒã’ã‚‹ãƒ’ãƒ¼ãƒ©ãƒ¼ã€‚äººã€…ã«ç™’ã—ã¨å¸Œæœ›ã‚’å±Šã‘ã‚ˆã†ã€‚"
}

st.title("ğŸ”® TAMAHAã®æ˜Ÿåº§ã¨å®¿å‘½æ•°")

name = st.text_input("ãŠåå‰ï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã§ã‚‚OKï¼‰", "ã‚²ã‚¹ãƒˆ")
birth_date = st.date_input("ç”Ÿå¹´æœˆæ—¥ã‚’é¸ã‚“ã§ãã ã•ã„", min_value=datetime(1900, 1, 1), max_value=datetime.today())

if st.button("è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆï¼"):
    # æ˜Ÿåº§ã‚’è¨ˆç®—
    month = birth_date.month
    day = birth_date.day

    zodiac_signs = [
        ("å±±ç¾Šåº§", (1, 1), (1, 19)),
        ("æ°´ç“¶åº§", (1, 20), (2, 18)),
        ("é­šåº§", (2, 19), (3, 20)),
        ("ç‰¡ç¾Šåº§", (3, 21), (4, 19)),
        ("ç‰¡ç‰›åº§", (4, 20), (5, 20)),
        ("åŒå­åº§", (5, 21), (6, 21)),
        ("èŸ¹åº§", (6, 22), (7, 22)),
        ("ç…å­åº§", (7, 23), (8, 22)),
        ("ä¹™å¥³åº§", (8, 23), (9, 22)),
        ("å¤©ç§¤åº§", (9, 23), (10, 23)),
        ("è åº§", (10, 24), (11, 22)),
        ("å°„æ‰‹åº§", (11, 23), (12, 21)),
        ("å±±ç¾Šåº§", (12, 22), (12, 31))
    ]

    zodiac = "ä¸æ˜"
    for sign, start, end in zodiac_signs:
        if (month == start[0] and day >= start[1]) or (month == end[0] and day <= end[1]):
            zodiac = sign
            break

    # å®¿å‘½æ•°ï¼ˆèª•ç”Ÿæ—¥ã®æ—¥ï¼‰
    shukumei_raw = day
    if shukumei_raw in [11, 22, 33]:
        shukumei = shukumei_raw
    else:
        shukumei = sum(map(int, str(shukumei_raw)))
        while shukumei > 9:
            shukumei = sum(map(int, str(shukumei)))

    role = shukumei_roles.get(shukumei, "ä¸æ˜")
    advice = shukumei_comments.get(shukumei, "ç‰¹åˆ¥ãªæ„å‘³ã‚’æŒã¤æ•°å­—ã§ã™ã€‚")

    st.markdown(f"âœ¨ {name}ã•ã‚“ã®çµæœ âœ¨")
    st.markdown(f"æ˜Ÿåº§ï¼š**{zodiac}**")
    st.markdown(f"å®¿å‘½æ•°ï¼š**{shukumei}ï¼ˆ{role}ï¼‰**")
    st.markdown(f"ğŸ” **ã‚ãªãŸã®å½¹å‰²ï¼š{role}ï¼ˆå®¿å‘½æ•°{shukumei}ï¼‰**")
    st.markdown(f"ğŸ“„ **å®¿å‘½æ•°ã‹ã‚‰ã®ã²ã¨ã“ã¨ï¼š** {advice}")
